<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/com/example/baitap2/controller/LikeController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/example/baitap2/controller/LikeController.java" />
              <option name="originalContent" value="package com.example.baitap2.controller;&#10;&#10;import com.example.baitap2.service.CommentService;&#10;import com.example.baitap2.service.ICommentService;&#10;import org.springframework.stereotype.Controller;&#10;import org.springframework.web.bind.annotation.*;&#10;&#10;@Controller&#10;public class LikeController {&#10;    private ICommentService service = new CommentService();&#10;&#10;    @PostMapping(&quot;/like/{id}&quot;)&#10;    public String like(@PathVariable int id) {&#10;        service.likeComment(id);&#10;        return &quot;redirect:/&quot;;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.baitap2.controller;&#10;&#10;import com.example.baitap2.service.ICommentService;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.stereotype.Controller;&#10;import org.springframework.web.bind.annotation.*;&#10;&#10;@Controller&#10;public class LikeController {&#10;&#10;    @Autowired&#10;    private ICommentService service;&#10;&#10;    @PostMapping(&quot;/like/{id}&quot;)&#10;    public String like(@PathVariable(&quot;id&quot;) Long id) {&#10;        service.like(id);&#10;        return &quot;redirect:/&quot;;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/com/example/baitap2/service/CommentService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/example/baitap2/service/CommentService.java" />
              <option name="originalContent" value="package com.example.baitap2.service;&#10;&#10;import com.example.baitap2.model.Comment;&#10;import com.example.baitap2.repository.CommentRepository;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.stereotype.Service;&#10;import org.springframework.transaction.annotation.Transactional;&#10;&#10;import java.util.List;&#10;&#10;@Service&#10;@Transactional&#10;public class CommentService implements ICommentService {&#10;&#10;    @Autowired&#10;    private CommentRepository repo;&#10;&#10;    @Override&#10;    public void save(Comment c) {&#10;        repo.save(c);&#10;    }&#10;&#10;    @Override&#10;    public List&lt;Comment&gt; today() {&#10;        return repo.getTodayComments();&#10;    }&#10;&#10;    @Override&#10;    public void like(Long id) {&#10;        // Nếu bạn muốn tăng like đơn giản&#10;        Comment c = repo.findById(id).orElse(null);&#10;        if (c != null) {&#10;            c.setLikes(c.getLikes() + 1);&#10;            repo.save(c); // update lại&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.baitap2.service;&#10;&#10;import com.example.baitap2.model.Comment;&#10;import com.example.baitap2.repository.CommentRepository;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.stereotype.Service;&#10;import org.springframework.transaction.annotation.Transactional;&#10;&#10;import java.util.List;&#10;&#10;@Service&#10;@Transactional&#10;public class CommentService implements ICommentService {&#10;&#10;    @Autowired&#10;    private CommentRepository repo;&#10;&#10;    @Override&#10;    public void save(Comment c) {&#10;        repo.save(c);&#10;    }&#10;&#10;    @Override&#10;    public List&lt;Comment&gt; today() {&#10;        return repo.getTodayComments();&#10;    }&#10;&#10;    @Override&#10;    public void like(Long id) {&#10;        // call repository method that increments likes&#10;        repo.like(id);&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>